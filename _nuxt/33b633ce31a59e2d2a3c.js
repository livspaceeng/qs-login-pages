(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{177:function(e,n){},178:function(e,n,t){var content=t(548);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(47).default)("36873827",content,!0,{sourceMap:!1})},547:function(e,n,t){"use strict";var o=t(178);t.n(o).a},548:function(e,n,t){(e.exports=t(46)(!1)).push([e.i,".center{width:500px;margin:100px auto auto}",""])},549:function(e,n,t){"use strict";t.r(n);var o={props:{title:{type:String,required:!0},icon:{type:String,required:!0}}},r=t(23),c=Object(r.a)(o,function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"column"},[n("div",{staticClass:"card"},[n("header",{staticClass:"card-header"},[n("p",{staticClass:"card-header-title has-text-grey"},[this._v("\n        "+this._s(this.title)+"\n      ")])]),this._v(" "),n("div",{staticClass:"card-content"},[n("div",{staticClass:"content has-text-centered"},[n("b-icon",{attrs:{icon:this.icon,size:"is-large",type:"is-primary"}})],1)]),this._v(" "),n("footer",{staticClass:"card-footer"},[n("div",{staticClass:"card-footer-item"},[n("span",[this._t("default")],2)])])])])},[],!1,null,null,null).exports,l=(t(45),t(62),t(96),t(97),t(5)),d=t(200),h=t.n(d),m=t(86),f=t.n(m),v={roleArn:"arn:aws:iam::102033571354:role/lsDevs",region:"ap-southeast-1",apiGatewayUrl:"https://74ulfqmpd8.execute-api.ap-southeast-1.amazonaws.com",apiGatewayPath:"/prod",hostToConsole:{"this.livspace.com":"https://console.aws.amazon.com/","aws.livspace.com":"https://console.aws.amazon.com/","quicksight.livspace.com":"https://quicksight.aws.amazon.com/","analytics.livspace.com":"https://quicksight.aws.amazon.com/",localhost:"https://quicksight.aws.amazon.com/"}};function w(){return(w=Object(l.a)(regeneratorRuntime.mark(function e(n,t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y(t).then(C).then(S).then(A).then(k).then(I).then(L));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(e){var n=f.a.get("https://atld2p7fkf.execute-api.ap-southeast-1.amazonaws.com/prod/awsUserAuth?email_id="+function(e){console.log(e);var n=e.getBasicProfile();return console.log(n.getEmail()),n.getEmail()}(e));return new Promise(function(t){n.then(function(n){console.log(e),v.roleArn="arn:aws:iam::102033571354:role/"+n.data.role,t(e)})})}function C(e){var n=e.getBasicProfile();console.log("Google ID: "+n.getId());var t=e.getAuthResponse().id_token;return console.log("Google ID Token: "+t),new Promise(function(e){e(t)})}function S(e){var n=new h.a.STS,t={RoleArn:v.roleArn,RoleSessionName:"AssumeRoleSession",WebIdentityToken:e};return new Promise(function(e,o){n.assumeRoleWithWebIdentity(t,function(n,data){n?o(n):(console.log("STS credentials: "+JSON.stringify(data.Credentials)),e(data))})})}function A(data){h.a.config.credentials=new h.a.Credentials(data.Credentials.AccessKeyId,data.Credentials.SecretAccessKey,data.Credentials.SessionToken),h.a.config.region=v.region;var e={sessionId:data.Credentials.AccessKeyId,sessionKey:data.Credentials.SecretAccessKey,sessionToken:data.Credentials.SessionToken};return new Promise(function(n){n(e)})}function k(e){v.apiGatewayUrl,v.apiGatewayPath;var n=new h.a.HttpRequest(v.apiGatewayUrl,v.region);n.method="POST",n.path=v.apiGatewayPath,n.body=JSON.stringify(e),n.headers.Host=n.endpoint.host;var t=new h.a.Signers.V4(n,"execute-api");return t.addAuthorization(h.a.config.credentials,h.a.util.date.getDate()),new Promise(function(e){e(t.request)})}function I(e){return new Promise(function(n,t){h.a.util.defer(function(){var data="";h.a.HttpClient.getInstance().handleRequest(e,{},function(e){e.on("data",function(e){data+=e.toString()}),e.on("end",function(){console.log("Sign-in token from Lambda: "+data),n(data)})},t)})})}function L(data){var e,n=JSON.parse(data),t="?Action=login";t+="&Issuer=Example.org",t+="&Destination="+encodeURIComponent((e=window.location.hostname,v.hostToConsole[e]?v.hostToConsole[e]:"https://console.aws.amazon.com/"));var o="https://signin.aws.amazon.com/federation"+(t+="&SigninToken="+n.SigninToken);window.location.replace(o)}var _={authenticate:function(e,n){return w.apply(this,arguments)},updateRole:function(e){v.roleArn=e,console.log(v)}},P={name:"HomePage",components:{Card:c},data:function(){return{error:!1,message:"",isLoading:!1,selectedRole:"arn:aws:iam::102033571354:role/lsDevs",roles:[{role:"arn:aws:iam::102033571354:role/lsCloudwatch",name:"Logs and Monitoring"},{role:"arn:aws:iam::102033571354:role/lsBasicRead",name:"Read Only Access"},{role:"arn:aws:iam::102033571354:role/lsDevsBasic",name:"Developer Basic"},{role:"arn:aws:iam::102033571354:role/lsDevs",name:"Developer Advanced"},{role:"arn:aws:iam::102033571354:role/lsLeadsBasic",name:"Lead Basic"},{role:"arn:aws:iam::102033571354:role/lsLeadsAdvanced",name:"Lead Advanced"},{role:"arn:aws:iam::102033571354:role/lsDatabaseAdmin",name:"Data Team"}]}},methods:{roleSelected:function(e){_.updateRole(e)},openLoading:function(){this.isLoading=!0},closeLoading:function(){this.isLoading=!1},danger:function(e){this.$toast.open({duration:5e3,message:e,position:"is-top",type:"is-danger"})},handleClickSignIn:function(){var e=this;this.openLoading();var n=this;this.$gAuth.signIn().then(function(t){console.log("user",t),e.isSignIn=e.$gAuth.isAuthorized,_.authenticate(e.$app,t).catch(function(e){console.log(e),n.error=!0,n.message="We are unable to authenticate you, Ensure you have chosen the role given to you, or reach to tech@livspace.com",n.danger(n.message),n.closeLoading()})}).catch(function(t){console.log(t),n.error=!0,n.message="We are unable to authenticate you, reach to tech@livspace.com",n.danger(n.message),e.closeLoading()})}}},R=(t(547),Object(r.a)(P,function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("section",{staticClass:"section"},[t("b-loading",{attrs:{"is-full-page":!0,active:e.isLoading,"can-cancel":!1},on:{"update:active":function(n){e.isLoading=n}}}),e._v(" "),t("div",{},[t("b-message",{staticClass:"center",attrs:{title:"Please sign in",type:"is-info",size:"is-medium",closable:!1}},[t("div",[e._v("Please signin using your livspace email account")]),e._v(" "),t("br"),e._v(" "),t("a",{staticClass:"button is-large is-fullwidth",on:{click:e.handleClickSignIn}},[e._v("Google Sign In")])])],1)],1)},[],!1,null,null,null));n.default=R.exports}}]);